<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>coreSNTP: Sntp_SendTimeRequest</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">coreSNTP<span id="projectnumber">&#160;v1.1.0</span>
   </div>
   <div id="projectbrief">Client library for synchronizing device time with internet time using Simple Network Time Protocol (SNTP)</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('sntp_sendtimerequest_function.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Sntp_SendTimeRequest </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Sends a request for time from the currently configured server (in the context). If the user has provided an authentication interface, the client authentication code is appended to the request before sending over the network by calling the <a class="el" href="group__sntp__callback__types.html#ga7f01446c0d655614b99fd4043c8f032a">SntpGenerateAuthCode_t</a> function of the <a class="el" href="struct_sntp_authentication_interface__t.html">SntpAuthenticationInterface_t</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This function will ONLY send a request if there is a server available in the configured list that has not rejected an earlier request for time. This adheres to the Best Practice functionality specified in <a href="https://tools.ietf.org/html/rfc4330#section-10">Section 10 Point 8 of SNTPv4 specification</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pContext</td><td>The context representing an SNTPv4 client. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">randomNumber</td><td>A random number serializing the SNTP request packet to protect against spoofing attacks by attackers that are off the network path of the SNTP client-server communication. This mechanism is suggested by SNTPv4 specification in <a href="https://tools.ietf.org/html/rfc4330#section-3">RFC 4330 Section 3</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">blockTimeMs</td><td>The maximum duration of time (in milliseconds) the function will block on attempting to send time request to the server over the network. If a zero block time value is provided, then the function will attempt to send the packet ONLY once.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>It is RECOMMENDED that a True Random Number Generator is used to generate the random number by using a hardware module, like Hardware Security Module (HSM), Secure Element, etc, as the entropy source.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The API function returns one of the following:<ul>
<li><a class="el" href="group__sntp__enum__types.html#ggaef7b22d8008bbfbbc7bbea5a7a30e798a8486f9ee1815b43418a9c0478bd8f016" title="Successful operation of an SNTP API.">SntpSuccess</a> if a time request is successfully sent to the currently configured time server in the context.</li>
<li><a class="el" href="group__sntp__enum__types.html#ggaef7b22d8008bbfbbc7bbea5a7a30e798a1829c0158e4f2630b6806afa4511dfd7" title="Invalid parameter passed to an API function.">SntpErrorBadParameter</a> if an invalid context is passed to the function.</li>
<li><a class="el" href="group__sntp__enum__types.html#ggaef7b22d8008bbfbbc7bbea5a7a30e798afc6ed7e8936aa676762523ba8a308e24" title="The SNTP context passed to Sntp_SendTimeRequest or Sntp_ReceiveTimeResponse APIs is is uninitialized.">SntpErrorContextNotInitialized</a> if an uninitialized or invalid context is passed to the function.</li>
<li><a class="el" href="group__sntp__enum__types.html#ggaef7b22d8008bbfbbc7bbea5a7a30e798a71c91750cf5069fc4223e4aaf0a5d4f0" title="The user-defined DNS resolution interface, SntpResolveDns_t, failed to resolve address for a time ser...">SntpErrorDnsFailure</a> if there is failure in the user-defined function for DNS resolution of the time server.</li>
<li><a class="el" href="group__sntp__enum__types.html#ggaef7b22d8008bbfbbc7bbea5a7a30e798a6dd0fee9073c6d7c55be89f1bc58b843" title="Networking operation of sending or receiving SNTP packet through the user-defined UDP transport inter...">SntpErrorNetworkFailure</a> if the SNTP request could not be sent over the network through the user-defined transport interface.</li>
<li><a class="el" href="group__sntp__enum__types.html#ggaef7b22d8008bbfbbc7bbea5a7a30e798a6db2603ebf3153c9472d3867694aa787" title="Failure from the user-supplied authentication interface, SntpAuthenticationInterface_t,...">SntpErrorAuthFailure</a> if there was a failure in generating the client authentication code in the user-defined authentication interface.</li>
<li><a class="el" href="group__sntp__enum__types.html#ggaef7b22d8008bbfbbc7bbea5a7a30e798a0e41141d4e0b0f1bf945830f7f2c6be9" title="A timeout occurred in sending time request packet over the network to a server through the Sntp_SendT...">SntpErrorSendTimeout</a> if the time request packet could not be sent over the network for the entire <code>blockTimeMs</code> duration.</li>
</ul>
</dd></dl>
<p>For an example POSIX application of using the coreSNTP library APIs to create an SNTP client, refer to <a class="el" href="code_example.html">Example application of using coreSNTP APIs</a>. Below is the part of the code example relevant to the <a class="el" href="core__sntp__client_8h.html#ab077d90d19e70a33ab08b31f48728ba5">Sntp_ReceiveTimeResponse</a> API. </p><div class="fragment"><div class="line">    <span class="keywordflow">while</span>( 1 )</div>
<div class="line">    {</div>
<div class="line">        status = <a class="code hl_function" href="core__sntp__client_8c.html#ae6cb1fe85cff973b2cfa73751adb4062">Sntp_SendTimeRequest</a>( &amp;context,</div>
<div class="line">                                       rand() % UINT32_MAX,</div>
<div class="line">                                       TIME_REQUEST_SEND_WAIT_TIME_MS );</div>
<div class="line">        assert( status == <a class="code hl_enumvalue" href="group__sntp__enum__types.html#ggaef7b22d8008bbfbbc7bbea5a7a30e798a8486f9ee1815b43418a9c0478bd8f016">SntpSuccess</a> );</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">do</span></div>
<div class="line">        {</div>
<div class="line">            status = <a class="code hl_function" href="core__sntp__client_8c.html#ab077d90d19e70a33ab08b31f48728ba5">Sntp_ReceiveTimeResponse</a>( &amp;context, TIME_REQUEST_RECEIVE_WAIT_TIME_MS );</div>
<div class="line">        } <span class="keywordflow">while</span>( status == <a class="code hl_enumvalue" href="group__sntp__enum__types.html#ggaef7b22d8008bbfbbc7bbea5a7a30e798a473ea25a626b0ab1067a9887e49d113e">SntpNoResponseReceived</a> );</div>
<div class="line"> </div>
<div class="line">        assert( status == <a class="code hl_enumvalue" href="group__sntp__enum__types.html#ggaef7b22d8008bbfbbc7bbea5a7a30e798a8486f9ee1815b43418a9c0478bd8f016">SntpSuccess</a> );</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Delay of poll interval period before next time synchronization. */</span></div>
<div class="line">        sleep( pollingIntervalPeriod );</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="ttc" id="acore__sntp__client_8c_html_ab077d90d19e70a33ab08b31f48728ba5"><div class="ttname"><a href="core__sntp__client_8c.html#ab077d90d19e70a33ab08b31f48728ba5">Sntp_ReceiveTimeResponse</a></div><div class="ttdeci">SntpStatus_t Sntp_ReceiveTimeResponse(SntpContext_t *pContext, uint32_t blockTimeMs)</div><div class="ttdoc">Receives a time response from the server that has been requested for time with the Sntp_SendTimeReque...</div><div class="ttdef"><b>Definition:</b> core_sntp_client.c:815</div></div>
<div class="ttc" id="acore__sntp__client_8c_html_ae6cb1fe85cff973b2cfa73751adb4062"><div class="ttname"><a href="core__sntp__client_8c.html#ae6cb1fe85cff973b2cfa73751adb4062">Sntp_SendTimeRequest</a></div><div class="ttdeci">SntpStatus_t Sntp_SendTimeRequest(SntpContext_t *pContext, uint32_t randomNumber, uint32_t blockTimeMs)</div><div class="ttdoc">Sends a request for time from the currently configured server (in the context). If the user has provi...</div><div class="ttdef"><b>Definition:</b> core_sntp_client.c:427</div></div>
<div class="ttc" id="agroup__sntp__enum__types_html_ggaef7b22d8008bbfbbc7bbea5a7a30e798a473ea25a626b0ab1067a9887e49d113e"><div class="ttname"><a href="group__sntp__enum__types.html#ggaef7b22d8008bbfbbc7bbea5a7a30e798a473ea25a626b0ab1067a9887e49d113e">SntpNoResponseReceived</a></div><div class="ttdeci">@ SntpNoResponseReceived</div><div class="ttdoc">No SNTP packet for server response is received from the network by the Sntp_ReceiveTimeResponse API.</div><div class="ttdef"><b>Definition:</b> core_sntp_serializer.h:240</div></div>
<div class="ttc" id="agroup__sntp__enum__types_html_ggaef7b22d8008bbfbbc7bbea5a7a30e798a8486f9ee1815b43418a9c0478bd8f016"><div class="ttname"><a href="group__sntp__enum__types.html#ggaef7b22d8008bbfbbc7bbea5a7a30e798a8486f9ee1815b43418a9c0478bd8f016">SntpSuccess</a></div><div class="ttdeci">@ SntpSuccess</div><div class="ttdoc">Successful operation of an SNTP API.</div><div class="ttdef"><b>Definition:</b> core_sntp_serializer.h:142</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
